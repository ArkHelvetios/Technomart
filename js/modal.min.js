const formButton=document.querySelector(".link-modal-form"),formModal=document.querySelector(".modal-form"),formModalContent=formModal.querySelector(".modal-form__wrapper"),formModalNameInput=formModalContent.querySelector("[name=modal-form_name]"),formModalEmailInput=formModalContent.querySelector("[name=modal-form_email]"),formModalTextarea=formModalContent.querySelector("[name=modal-form_message]"),mapButton=document.querySelector(".link-modal-map"),mapModal=document.querySelector(".modal-map"),addToCartButtons=document.querySelectorAll(".products__buy-button"),addToCartModal=document.querySelector(".modal-add-to-cart"),closeModalButtons=document.querySelectorAll(".modal__close-button");let isLocalStorage=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(a){isLocalStorage=!1}formButton.addEventListener("click",(a=>{a.preventDefault(),formModal.classList.add("modal_active"),storageName&&!storageEmail?(formModalNameInput.value=storageName,formModalEmailInput.focus()):storageName&&storageEmail?(formModalNameInput.value=storageName,formModalEmailInput.value=storageEmail,formModalTextarea.focus()):formModalNameInput.focus()})),mapButton.addEventListener("click",(a=>{a.preventDefault(),mapModal.classList.add("modal_active")}));for(let a of addToCartButtons)a.addEventListener("click",(a=>{a.preventDefault(),addToCartModal.classList.add("modal_active")}));for(let a of closeModalButtons)a.addEventListener("click",(a=>{a.preventDefault(),formModal.classList.remove("modal_active"),formModal.classList.remove("modal_error"),mapModal.classList.remove("modal_active"),addToCartModal.classList.remove("modal_active")}));window.addEventListener("keydown",(a=>{"Esc"!==a.key&&"Escape"!==a.key||(a.preventDefault(),formModal.classList.remove("modal_active"),formModal.classList.remove("modal_error"),mapModal.classList.remove("modal_active"),addToCartModal.classList.remove("modal_active"))})),formModalContent.addEventListener("submit",(a=>{formModalEmailInput.value&&formModalTextarea.value?isLocalStorage&&(localStorage.setItem("name",formModalNameInput.value),localStorage.setItem("email",formModalEmailInput.value)):(a.preventDefault(),formModal.classList.remove("modal_error"),formModal.offsetWidth=formModal.offsetWidth,formModal.classList.add("modal_error"))}));
