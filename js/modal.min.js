const formButton=document.querySelector(".link-modal-form"),formModal=document.querySelector(".modal-form");if(formModal){const a=formModal.querySelector(".modal-form__wrapper"),b=a.querySelector("[name=modal-form_name]"),c=a.querySelector("[name=modal-form_email]"),d=a.querySelector("[name=modal-form_message]");let e=!0,f="",g="";try{f=localStorage.getItem("name"),g=localStorage.getItem("email")}catch(a){e=!1}formButton.addEventListener("click",a=>{a.preventDefault(),formModal.classList.add("modal_active"),f&&!g?(b.value=f,c.focus()):f&&g?(b.value=f,c.value=g,d.focus()):b.focus()}),a.addEventListener("submit",a=>{c.value&&d.value?e&&(localStorage.setItem("name",b.value),localStorage.setItem("email",c.value)):(a.preventDefault(),formModal.classList.remove("modal_error"),formModal.offsetWidth=formModal.offsetWidth,formModal.classList.add("modal_error"))})}const mapButton=document.querySelector(".link-modal-map"),mapModal=document.querySelector(".modal-map");mapModal&&mapButton.addEventListener("click",a=>{a.preventDefault(),mapModal.classList.add("modal_active")});const addToCartButtons=document.querySelectorAll(".products__buy-button"),addToCartModal=document.querySelector(".modal-add-to-cart");if(addToCartModal)for(let a of addToCartButtons)a.addEventListener("click",a=>{a.preventDefault(),addToCartModal.classList.add("modal_active")});const closeModalButtons=document.querySelectorAll(".modal__close-button");for(let a of closeModalButtons)a.addEventListener("click",a=>{a.preventDefault(),formModal&&(formModal.classList.remove("modal_active"),formModal.classList.remove("modal_error"));mapModal&&mapModal.classList.remove("modal_active"),addToCartModal&&addToCartModal.classList.remove("modal_active")});window.addEventListener("keydown",a=>{("Esc"===a.key||"Escape"===a.key)&&(a.preventDefault(),formModal&&(formModal.classList.remove("modal_active"),formModal.classList.remove("modal_error")),mapModal&&mapModal.classList.remove("modal_active"),addToCartModal&&addToCartModal.classList.remove("modal_active"))});
